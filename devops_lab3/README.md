–ê–≤—Ç–æ—Ä: –ö—Ä–µ—Å—Ç—å—è–Ω–æ–≤–∞ –ï–ª–∏–∑–∞–≤–µ—Ç–∞
# CI/CD: Github Actions
## "–ü–ª–æ—Ö–æ–π" CI/CD —Ñ–∞–π–ª
> –ù–∞–ø–∏—Å–∞—Ç—å ‚Äú–ø–ª–æ—Ö–æ–π‚Äù CI/CD —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –≤ –Ω–µ–º –µ—Å—Ç—å –Ω–µ –º–µ–Ω–µ–µ –ø—è—Ç–∏ ‚Äúbad practices‚Äù –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é CI/CD

[–ù–∞–ø–∏—Å–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —ç—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏](https://github.com/plida/itmo_devops-cloud/blob/master/.github/workflows/bad_example.yml).

```
name: CI-CD_devoops 

on: 
  push:
    branches: [ ci-cd-test ]

jobs:
  Test:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./devops_lab3
    steps:
      - uses: actions/checkout@v4
      - run: |
          sudo apt-get update
          sudo apt-get install -y python3
          pip install pytest
      - run: |
          pytest test_main.py
  Deploy:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./devops_lab3
    steps: 
      - uses: actions/checkout@v4
      - run: |
          sudo apt-get update
          sudo apt-get install -y python3
      - run: |
          echo "üòà BAD EXAMPLE"
          python helloworld.py
          
```

**–£—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:**

![alt text](<../images/cicdbad1.png>)

## "–•–æ—Ä–æ—à–∏–π" CI/CD —Ñ–∞–π–ª
> –ù–∞–ø–∏—Å–∞—Ç—å ‚Äú—Ö–æ—Ä–æ—à–∏–π‚Äù CI/CD, –≤ –∫–æ—Ç–æ—Ä–æ–º —ç—Ç–∏ –ø–ª–æ—Ö–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

[–ù–∞–ø–∏—Å–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —ç—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏](https://github.com/plida/itmo_devops-cloud/blob/master/.github/workflows/good_example.yml).

```
name: CI-CD_devOPs 

defaults:
      run:
        working-directory: ./devops_lab3

on: 
  push:
    branches: [ ci-cd-test ]

jobs:
  Test:
    runs-on: ubuntu-22.04
    steps:
      - name: Checkout
        uses: actions/checkout@v4
  
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.12'
  
      - name: Install pytest
        run: |
          pip install pytest
          
      - name: Launch Test
        run: |
          pytest test_main.py
          
  Deploy:
    needs: Test
    runs-on: ubuntu-22.04
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.12'

      - name: Deployment
        run: |
              echo "üòá GOOD EXAMPLE"
              python helloworld.py
```

**–£—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:**

![alt text](<../images/cicdgood1.png>)

## –û–ø–∏—Å–∞–Ω–∏–µ –ø–ª–æ—Ö–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ –∏ –∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

> –í Readme –æ–ø–∏—Å–∞—Ç—å –∫–∞–∂–¥—É—é –∏–∑ –ø–ª–æ—Ö–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ –≤ –ø–ª–æ—Ö–æ–º —Ñ–∞–π–ª–µ, –ø–æ—á–µ–º—É –æ–Ω–∞ –ø–ª–æ—Ö–∞—è –∏ –∫–∞–∫ –≤ —Ö–æ—Ä–æ—à–µ–º –æ–Ω–∞ –±—ã–ª–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞, –∫–∞–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–≤–ª–∏—è–ª–æ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### 1. –£–∫–∞–∑–∞–Ω–∏–µ :latest –≤–µ—Ä—Å–∏–∏

–ö–∞–∫ –∏ –≤ —Ä–∞–±–æ—Ç–µ —Å –¥–æ–∫–µ—Ä—Ñ–∞–π–ª–∞–º–∏, —É–∫–∞–∑–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ —Ç–æ–≥–æ –∂–µ Ubuntu –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –õ—É—á—à–µ —É–∫–∞–∑–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é, –Ω–∞–ø—Ä–∏–º–µ—Ä, ubuntu-22.04, –∏ —Ç–æ–≥–¥–∞ –º—ã —Ç–æ—á–Ω–æ –±—É–¥–µ–º –∑–Ω–∞—Ç—å, —á—Ç–æ –≤—ã—Ö–æ–¥ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –£–±—É–Ω—Ç—É –Ω–∞–º —Å–ª—É—á–∞–π–Ω–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞ –Ω–µ –ø–æ–ª–æ–º–∞–µ—Ç.

### 2. –ò–º–µ–Ω–∞ —à–∞–≥–æ–≤

–í –ø–ª–æ—Ö–æ–π –≤–µ—Ä—Å–∏–∏ —Ñ–∞–π–ª–∞ –∏–º–µ–Ω–∞ —à–∞–≥–∞–º —Ä–∞–±–æ—Ç –Ω–∏–∫–∞–∫ –Ω–µ –ø—Ä–æ–ø–∏—Å—ã–≤–∞–ª–∏—Å—å, –æ—Ç—á–µ–≥–æ –≤ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è—Ö –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ —à–∞–≥ —Å –∏–º–µ–Ω–µ–º "Run sudo apt-get update". –í –∫–æ—Ç–æ—Ä–æ–º –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –µ—â—ë –∑–∞–ª–æ–∂–µ–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–π—Ç–æ–Ω–∞ –∏ –ø–∞–π—Ç–µ—Å—Ç–∞. –í —Ü–µ–ª–æ–º –ø–æ –ø–µ—Ä–≤—ã–º –ª–∏–Ω–∏—è–º –±–ª–æ–∫–∞ –Ω–µ –≤—Å–µ–≥–¥–∞ –ª–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å, –æ —á—ë–º —à–∞–≥, –∏ —ç—Ç–æ –Ω–µ–∫—Ä–∞—Å–∏–≤–æ, –ø–æ—ç—Ç–æ–º—É –º—ã –∏–º –∏–º–µ–Ω–∞ –≤ —Ö–æ—Ä–æ—à–µ–º —Ñ–∞–π–ª–µ –¥–∞–ª–∏. –¢–µ–ø–µ—Ä—å –ø–æ–Ω—è—Ç–Ω–æ: –µ—Å—Ç—å Checkout, –µ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–π—Ç–æ–Ω–∞, –ø–∞–π—Ç–µ—Å—Ç–∞ –∏ —Å–∞–º–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞.

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ defaults

–ß—Ç–æ –¥–µ–ø–ª–æ–π, —á—Ç–æ —Ç–µ—Å—Ç, —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –æ–¥–Ω–æ–π —Ä–∞–±–æ—á–µ–π –ø–∞–ø–∫–µ. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å –µ—ë –∫–∞–∂–¥—ã–π —Ä–∞–∑, –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ –≤—ã–≤–µ—Å—Ç–∏. –ò –∫—Ä–∞—Å–∏–≤–æ –≤—ã–≥–ª—è–¥–∏—Ç, –∏ –ª–µ–≥—á–µ –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å –æ–±—â—É—é –ø–∞–ø–∫—É –ø—Ä–∏ —Å–º–µ–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞. –í —Ü–µ–ª–æ–º —Ä–µ—é–∑ –∫–æ–Ω—Ñ–∏–≥–æ–≤ –≤ CI/CD –ø–æ–æ—â—Ä—è–µ—Ç—Å—è - —Å—é–¥–∞ –∂–µ –º–æ–∂–Ω–æ –æ—Ç–Ω–µ—Å—Ç–∏ [–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ extend –∏ —è—Ä–ª—ã–∫–æ–≤](https://about.gitlab.com/blog/2020/10/01/three-yaml-tips-better-pipelines/).

### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ actions

–í –ø–ª–æ—Ö–æ–º —Ñ–∞–π–ª–µ –º—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∏ –ø–∞–π—Ç–æ–Ω —á–µ—Ä–µ–∑ `sudo apt-get install -y python3`, –Ω–æ –≤ "Github actions" –µ—Å—Ç—å —Å–ª–æ–≤–æ "actions", –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –Ω—É–∂–Ω–æ: —ç—Ç–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–∏—Ç—Ö–∞–±–∞](https://docs.github.com/en/actions/use-cases-and-examples/building-and-testing/building-and-testing-python#specifying-a-python-version). setup-python –ø–æ–º–æ–≥–∞–µ—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–π—Ç–æ–Ω–∞ —Å—Ä–µ–¥–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–∞–Ω–Ω–µ—Ä–æ–≤, –∫ —Ç–æ–º—É –∂–µ —á–µ—Ä–µ–∑ –Ω–µ–≥–æ –µ–≥–æ –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞ –ª–∏–Ω—É–∫—Å, –Ω–æ –∏ –Ω–∞ –º–∞–∫, –∏ –Ω–∞ –≤–∏–Ω–¥–æ—É—Å.

### 5. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –¥–µ–ø–ª–æ—è –æ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–∞

–í —Å–æ–∑–¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –¥–µ–ø–ª–æ–π –∏ —Ç–µ—Å—Ç –Ω–µ –æ—á–µ–Ω—å —Ç–æ –∏ —Å–≤—è–∑–∞–Ω—ã, –Ω–æ –º—ã –ø–æ–ø—Ä–æ–±—É–µ–º –∑–∞–∫—Ä—ã—Ç—å –Ω–∞ —ç—Ç–æ –≥–ª–∞–∑–∞ –∏ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –Ω–µ—Ç, —á—Ç–æ –±—ã —Ç–∞–º –Ω–µ –±—ã–ª–æ, –Ω–∞–º –Ω—É–∂–Ω–∞ —á—ë—Ç–∫–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –ï—Å–ª–∏ –≤ –ø–ª–æ—Ö–æ–º –ø–∞–π–ø–ª–∞–π–Ω–µ –¥–µ–ø–ª–æ–π –∏ —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞–ª–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, —Ç–æ –ø—Ä–æ–ø–∏—Å–∞–≤ —É –¥–µ–ø–ª–æ—è "needs: Test", –º—ã —ç—Ç—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Å–æ–∑–¥–∞—ë–º. –í–∏–∑—É–∞–ª—å–Ω–æ –∑–∞–º–µ—Ç–Ω–æ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ –ø–∞–π–ø–ª–∞–π–Ω–∞, —á—Ç–æ —Ä–∞–±–æ—Ç—ã —à–ª–∏ –ø–æ–æ—á–µ—Ä—ë–¥–Ω–æ. 

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–£ –Ω–∞—Å –ø–æ–ª—É—á–∏–ª—Å—è –ø—Ä–∏–ª–∏—á–Ω—ã–π —Ñ–∞–π–ª CI/CD, –≤ –∫–æ—Ç–æ—Ä–æ–º –±–ª–∞–≥–æ–¥–∞—Ä—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å—Ç–∞–ª–∏ —Å–æ–≤–µ—Ä—à–∞—Ç—å—Å—è –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –≤ –ø–ª–æ—Ö–æ–º –ø–∞–π–ø–ª–∞–π–Ω–µ (—Ö–æ—Ç—è, –∫–æ–Ω–µ—á–Ω–æ, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–∞—Ä–∞–ª–µ–ª–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –±–æ–ª—å—à–µ–º—É –æ–∂–∏–¥–∞–Ω–∏—é). –≠—Ç–æ –±—ã–ª–∞ –æ—á–µ–Ω—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –¥–ª—è –æ—á–µ–Ω—å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–π —Ç–µ–º—ã.
