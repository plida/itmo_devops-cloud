# Введение
**Задание:**
> Попробовать взломать nginx другой команды. Проверить минимум три уязвимости - например path traversal, перебор страниц через ffuf и/или любые другие на ваш выбор.
Взлом считается успешным, если вы попали туда, куда не планировалось попадать пользователю, даже если там ничего нет. Успешность взлома не влияет на оценку лаб обеих команд. 

>В отчет приложить скрины попыток взлома, описание уязвимостей, на которые проверяли и итог - успешен взлом или нет.

> Тк открывать такие нжинксы в интернет не лучшая идея, для решения лабы предлагаю либо встретиться с другой командой в одном помещении и поднять локальную сеть, либо запустить у себя нжинкс с их конфигом. Но при этом настройки нжинкс со стороны админа и изменения в конфиге считаться попыткой взлома не будут.
Просьба договориться с другими командами кто кого ломает. Взлом нжинкса одной команды не должен фигурировать в отчетах больше двух раз.

Была взята работа команды [Ёжиков в тумане](https://github.com/DanilRozhin/Clouds-DevOps/tree/main/DevOps%20-%20LAB%201).

# Конфигурация проекта в своей среде

Из-за сложной конфигурации моего домашнего сервера, перенести конфигурационные файлы Ёжиков - не прямолинейная задача. Из-за сжатых сроков я настроила его как свои обычные сайты по шаблону - точка входа на виртуальном сервере portal с сертификатами, 
и сам конфигурационный файл и статичные файлы сервера на yetti.

Конфиг nginx на yetti:

```
server {
        listen 80;
        server_name _;
        root /var/www/project1;
        index index.htm index.html index.nginx-debian.html;
        location /i/ {
                alias /var/www/images/;
        }
        location / {
          try_files $uri $uri/ =404;
        }

}
```
Тем самым я временно открыла сайт https://nginxlab.plida.ru:

![alt text](<../images/nginx1.png>)

В целом, изменение структуры не должно было повлять на результаты работы. Какие же они?

# Эксплойты

## Абьюз мисконфигурации root и location nginx

Я закрою глаза на то, что я видела этот конфиг, и проверю базу: мы случайно не находимся в /etc/nginx? Если у команды не прописано нигде location /, то можно и nginx.conf стырить!

![alt text](<../images/nginx2.jpg>)

Ну, блин. Он выдаёт ошибку 404, а значит, меня всё же туда редиректят.

Загляним в конфиг, и действительно:

```
location / {
          try_files $uri $uri/ =404;
        }
```

Ну, можно ещё попробовать что-то потырить, конечно, но забегая вперёд - в их корневой папке нет ничего примечательного. Что так и должно быть! Если я в /var/www/project1 загружу секретик, и попробую его курлнуть...

![alt text](<../images/nginx3.jpg>)

Фантастика, он мой! Муа-ха-ха-ха! 

Но, очевидно, это не вина ёжиков... 

Хм...

Мораль: если вы предоставляете доступ к запросам на корневой путь, и храните секретные файлы в корневом пути, то?.. у пользователь есть доступ к этим файлам?..
